<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HEPOtech – Digitalisierung & KI Fragebogen</title>
  <meta name="description" content="Fragebogen zur Vorbereitung eines Beratungsgesprächs zu Digitalisierung & KI." />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Professionelle Schriftart -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --background: #ffffff;
      --foreground: #171717;
      --brand-primary: #31A3C4;
      --status-positive: #10b981;
      --status-danger: #ef4444;
    }

    html { background:#f8fafc; color:#0f172a; }
    body { background: var(--background); color: var(--foreground); font-family: 'Inter', Arial, Helvetica, sans-serif; }

    a { color:#31A3C4; text-underline-offset:2px; transition: color .15s ease; }
    a:hover { color:#0f172a; text-decoration: underline; }

    :focus-visible { outline:none; box-shadow: 0 0 0 2px #0f172a, 0 0 0 4px #fff; border-radius: 8px; }

    .card { border-radius: 16px; border:1px solid #e2e8f0; background:#fff; padding:24px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    .btn-primary { display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius: 12px; background:#f1f5f9; color:#0f172a; padding:.5rem .75rem; font-size:.9rem; font-weight:600; border:1px solid #cbd5e1; transition: background .15s ease; }
    .btn-primary:hover { background:#e2e8f0; }
    .btn-secondary { display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius:12px; background:#fff; color:#0f172a; padding:.5rem .75rem; font-size:.9rem; font-weight:600; border:1px solid #cbd5e1; transition: background .15s ease; }
    .btn-secondary:hover { background:#f8fafc; }
    .btn-dark { display:inline-flex; align-items:center; justify-content:center; gap:.5rem; border-radius:12px; background:#0f172a; color:#fff; padding:.5rem .75rem; font-size:.9rem; font-weight:700; transition: background .15s ease; }
    .btn-dark:hover { background:#0b1220; }

    .input-field { width:100%; border-radius:12px; border:1px solid #cbd5e1; background:#fff; padding:.5rem .75rem; font-size:.9rem; color:#0f172a; transition:border-color .15s ease, box-shadow .15s ease; }
    .input-field:focus { border-color:#31A3C4; box-shadow:0 0 0 2px rgba(49,163,196,.3); outline:none; }

    .label { font-size:.9rem; font-weight:600; color:#1e293b; }
    .help-text { font-size:.9rem; color:#475569; }

    .stepper { display:flex; flex-wrap:wrap; align-items:center; gap:.5rem; font-size:.9rem; color:#64748b; }
    .pill { border-radius:999px; border:1px solid #cbd5e1; padding:.25rem .75rem; background:#fff; }
    .pill.active { background:#f1f5f9; color:#0f172a; border-color:#94a3b8; }
    .progress { height:8px; width:100%; border-radius:999px; border:1px solid #cbd5e1; overflow:hidden; background:#f1f5f9; }
    .bar { height:100%; background:#31A3C4; width:0%; transition:width .25s ease; }

    .repeater-item { border-radius: 12px; border:1px solid #e2e8f0; background:#fff; padding:12px; }
  </style>
</head>

<body>
  <div class="max-w-4xl mx-auto p-6">
    <header class="mb-6 flex items-center gap-4">
      <div class="h-12 w-12">
        <img src="./logo.png" alt="HEPOtech Logo" class="h-12 w-12 object-contain" onerror="this.replaceWith(document.getElementById('logo-fallback').content.cloneNode(true))">
        <template id="logo-fallback">
          <div class="grid h-12 w-12 place-items-center rounded-xl" style="background:#31A3C4;color:#fff;font-weight:800">H</div>
        </template>
      </div>
      <div>
        <h1 class="text-2xl font-bold m-0">HEPOtech – Vorbereitungsgespräch Digitalisierung & KI</h1>
        <p class="text-sm text-slate-600">Bitte beantworten Sie die Fragen in Ruhe. Ihre Eingaben werden lokal gespeichert und sicher übertragen.</p>
      </div>
    </header>

    <div class="card grid gap-6">
      <div class="stepper" id="stepper"></div>
      <div class="progress"><div class="bar" id="bar"></div></div>

      <div id="steps">
        <!-- Schritt 1 -->
        <section class="step" data-title="Ziele">
          <div class="repeater-item">
            <div class="flex items-center gap-3 mb-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full text-white text-sm font-semibold" style="background:#31A3C4">1</span>
              <h3 class="m-0 text-base font-semibold">Was sind die drei wichtigsten Ziele der Schröder und Sohn GmbH?</h3>
            </div>
            <textarea class="input-field" id="q1" name="q1" placeholder="Ziele 1–3 als Stichpunkte"></textarea>
          </div>
        </section>

        <!-- Schritt 2 -->
        <section class="step" data-title="Störfaktoren">
          <div class="repeater-item">
            <div class="flex items-center gap-3 mb-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full text-white text-sm font-semibold" style="background:#31A3C4">2</span>
              <h3 class="m-0 text-base font-semibold">Welche drei Dinge stören dich aktuell am meisten in deinem Unternehmen?</h3>
            </div>
            <textarea class="input-field" id="q2" name="q2" placeholder="Störungen/Probleme 1–3"></textarea>
          </div>
        </section>

        <!-- Schritt 3 -->
        <section class="step" data-title="Zeitfresser">
          <div class="repeater-item">
            <div class="flex items-center gap-3 mb-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full text-white text-sm font-semibold" style="background:#31A3C4">3</span>
              <h3 class="m-0 text-base font-semibold">Wo siehst du derzeit die größten Zeitfresser in deinem Unternehmen?</h3>
            </div>
            <textarea class="input-field" id="q3" name="q3" placeholder="Zeitfresser/Engpässe"></textarea>
          </div>
        </section>

        <!-- Schritt 4 -->
        <section class="step" data-title="Digitale Rolle">
          <div class="repeater-item">
            <div class="flex items-center gap-3 mb-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full text-white text-sm font-semibold" style="background:#31A3C4">4</span>
              <h3 class="m-0 text-base font-semibold">Welche Rolle spielen zukünftig digitale Technologien in deinem Unternehmen?</h3>
            </div>
            <textarea class="input-field" id="q4" name="q4" placeholder="Einsatzfelder, Erwartungen, Bedenken"></textarea>
          </div>
        </section>

        <!-- Schritt 5 -->
        <section class="step" data-title="Erwartungen an uns">
          <div class="repeater-item">
            <div class="flex items-center gap-3 mb-2">
              <span class="inline-flex h-6 w-6 items-center justify-center rounded-full text-white text-sm font-semibold" style="background:#31A3C4">5</span>
              <h3 class="m-0 text-base font-semibold">Welche Erwartungshaltung hast du an uns?</h3>
            </div>
            <textarea class="input-field" id="q5" name="q5" placeholder="z. B. Ergebnisse, Geschwindigkeit, Zusammenarbeit"></textarea>
          </div>
        </section>
      </div>

      <div class="flex flex-wrap justify-end gap-2">
        <button class="btn-secondary" type="button" id="prev">Zurück</button>
        <button class="btn-primary" type="button" id="next">Weiter</button>
        <button class="btn-secondary" type="button" id="save">Zwischenspeichern</button>
        <button class="btn-secondary" type="button" id="reset">Zurücksetzen</button>
        <button class="btn-dark" type="button" id="submit" style="display:none">Jetzt absenden</button>
      </div>
    </div>

    <!-- Datenschutz (versteckt) -->
    <section id="datenschutz" class="card mt-6" style="display:none">
      <h2 class="text-lg font-semibold mb-2">Datenschutzhinweise</h2>
      <p class="help-text">Verantwortlich: HEPOtech. Wir verarbeiten die in diesem Formular eingegebenen Daten zum Zweck der Vorbereitung und Durchführung eines Beratungsgesprächs. Rechtsgrundlage ist Art. 6 Abs. 1 lit. b DSGVO (vorvertragliche Maßnahmen) bzw. Art. 6 Abs. 1 lit. a DSGVO (Ihre Einwilligung), sofern Sie zusätzliche Angaben freiwillig machen.</p>
      <ul class="help-text list-disc pl-6">
        <li>Empfänger: interne Berater/Projektmitglieder; Auftragsverarbeiter (z. B. Hosting/Automationsdienste).</li>
        <li>Speicherdauer: bis Abschluss des Projekts bzw. gesetzlicher Aufbewahrungsfristen.</li>
        <li>Ihre Rechte: Auskunft, Berichtigung, Löschung, Einschränkung, Widerspruch, Datenübertragbarkeit, Beschwerde bei einer Aufsichtsbehörde.</li>
        <li>Kontakt für Datenschutzanfragen: <a href="mailto:max@meisterbuerohamm.de">max@meisterbuerohamm.de</a></li>
      </ul>
      <p class="help-text">Weitere Details und eine vollständige Datenschutzerklärung stellen wir Ihnen auf Anfrage zur Verfügung.</p>
    </section>

    <footer class="mt-6 text-xs text-slate-600">
      © <span id="year"></span> HEPOtech ·
      <a href="#datenschutz" id="footer-ds-link" class="underline">Datenschutz</a>
    </footer>
  </div>

  <script>
    (function(){
      const $ = (s, ctx=document)=>ctx.querySelector(s);
      const $$ = (s, ctx=document)=>Array.from(ctx.querySelectorAll(s));
      const stepsEl = $('#steps');
      const stepEls = $$('.step', stepsEl);
      const stepper = $('#stepper');
      const bar = $('#bar');
      const prevBtn = $('#prev');
      const nextBtn = $('#next');
      const submitBtn = $('#submit');
      const saveBtn = $('#save');
      const resetBtn = $('#reset');
      const year = $('#year');
      if(year) year.textContent = new Date().getFullYear();
      const FORM_KEY = 'fragebogen_hepotec_v1';

      let current = 0;
      function renderStepper(){
        stepper.innerHTML='';
        stepEls.forEach((s,i)=>{
          const pill = document.createElement('div');
          pill.className = 'pill' + (i===current? ' active':'');
          pill.textContent = (i+1)+'. '+(s.dataset.title||'Schritt');
          stepper.appendChild(pill);
        });
      }
      function showStep(i){
        current = Math.max(0, Math.min(i, stepEls.length-1));
        stepEls.forEach((s,idx)=> s.style.display = idx===current ? 'block':'none');
        renderStepper();
        const pct = Math.round((current/(stepEls.length-1))*100);
        if(bar) bar.style.width = pct+'%';
        prevBtn.disabled = current===0;
        nextBtn.style.display = current===stepEls.length-1 ? 'none':'inline-flex';
        submitBtn.style.display = current===stepEls.length-1 ? 'inline-flex':'none';
      }

      function collect(){
        const data = {};
        $$('input,textarea,select').forEach(el=>{
          data[el.id||el.name]=el.value||'';
        });
        return data;
      }
      function save(){ localStorage.setItem(FORM_KEY, JSON.stringify(collect())); }
      function load(){ try{ const d=JSON.parse(localStorage.getItem(FORM_KEY)||'null'); if(!d) return; Object.entries(d).forEach(([k,v])=>{ const el = document.getElementById(k) || document.querySelector(`[name=\"${k}\"]`); if(el) el.value=v; }); }catch(e){} }

      nextBtn.addEventListener('click', ()=> showStep(current+1));
      prevBtn.addEventListener('click', ()=> showStep(current-1));
      saveBtn.addEventListener('click', save);
      resetBtn.addEventListener('click', ()=>{ if(confirm('Alle Eingaben löschen?')){ localStorage.removeItem(FORM_KEY); location.reload(); } });
      stepsEl.addEventListener('input', e=>{ if(e.target && (e.target.id||e.target.name)) save(); });

      // Datenschutz-Link aktivieren
      const dsLink = document.getElementById('footer-ds-link');
      const dsSection = document.getElementById('datenschutz');
      if(dsLink && dsSection){
        dsLink.addEventListener('click', (e)=>{
          e.preventDefault();
          dsSection.style.display = 'block';
          dsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      }

      load();
      showStep(0);
    })();
  </script>
</body>
</html>
